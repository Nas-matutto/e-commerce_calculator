---
import Layout from '~/layouts/PageLayout.astro';

const metadata = {
  title: 'E-commerce Launch Cost Estimator - Budget Calculator',
  description: 'Calculate estimated costs for launching your e-commerce brand. Get cost breakdowns for product sourcing, inventory, marketing, and total launch costs.',
  keywords: 'e-commerce launch cost, startup cost calculator, business launch budget, e-commerce cost estimator',
  canonical: 'https://www.sellingwithnas.com/tools/launch-cost-estimator',
};
---

<Layout metadata={metadata}>
  <!-- Calculator Content -->
  <div class="calculator-page">
    <div class="floating-elements">
      <div class="floating-circle"></div>
      <div class="floating-circle"></div>
      <div class="floating-circle"></div>
    </div>

    <div class="container">
      <div class="header">
        <h1>E-commerce Brand Launch Cost Estimator</h1>
        <p>Calculate estimated costs for launching your e-commerce brand</p>
      </div>

      <div class="calculator-grid">
        <div class="input-section">
          <h2 class="section-title">Product Information</h2>
          
          <div class="input-group">
            <label for="productType">Product Category</label>
            <select id="productType">
              <option value="">Select a category</option>
              <option value="electronics">Electronics & Tech</option>
              <option value="fashion">Fashion & Apparel</option>
              <option value="beauty">Beauty & Skincare</option>
              <option value="fitness">Fitness & Sports</option>
              <option value="home">Home & Garden</option>
              <option value="jewelry">Jewelry & Accessories</option>
              <option value="books">Books & Media</option>
              <option value="toys">Toys & Games</option>
              <option value="food">Food & Beverages</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="input-group">
            <label for="targetPrice">Target Product Price ($)</label>
            <input type="number" id="targetPrice" placeholder="e.g., 29" min="5" max="500">
          </div>

          <div class="input-group">
            <label for="businessScale">Launch Strategy</label>
            <select id="businessScale">
              <option value="small">Conservative Start ($3K-8K)</option>
              <option value="medium">Balanced Growth ($5K-15K)</option>
              <option value="large">Aggressive Launch ($8K-25K)</option>
            </select>
          </div>

          <button class="calculate-btn" id="analyze-button">
            Calculate Launch Costs
          </button>

          <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Calculating your launch costs...</p>
          </div>

          <div class="error" id="error">
            <p id="errorMessage"></p>
          </div>
        </div>

        <div class="results-section">
          <h2 class="section-title">Launch Cost Analysis</h2>
          
          <div class="results" id="results">
            <div class="summary-grid" id="summaryGrid">
              <!-- Summary stats will be populated here -->
            </div>
            
            <div class="cost-breakdown">
              <h3>Cost Breakdown</h3>
              <div id="costTableContainer">
                <!-- Cost table will be populated here -->
              </div>
            </div>
            
            <div id="totalSection">
              <!-- Total investment will be populated here -->
            </div>
            
            <div class="considerations">
              <h3>Key Considerations</h3>
              <div id="considerationsContent">
                <!-- Considerations will be populated here -->
              </div>
            </div>
          </div>
          
          <div class="placeholder" id="placeholder">
            <div class="placeholder-icon">üìä</div>
            <h3>Ready to Calculate</h3>
            <p>Enter your product details on the left to see detailed cost estimates for launching your e-commerce brand</p>
          </div>
        </div>
      </div>

      <!-- Back to home button -->
      <div style="text-align: center; margin: 40px 0;">
        <a href="/" class="btn btn-secondary">‚Üê Back to Home</a>
      </div>
    </div>
  </div>

  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "E-commerce Launch Cost Calculator",
  "description": "Free calculator to determine e-commerce launch costs, budget planning, and investment requirements for new brands",
  "url": "https://www.sellingwithnas.com/tools/launch-cost-estimator",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web Browser",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "creator": {
    "@type": "Person",
    "name": "Nas",
    "url": "https://www.sellingwithnas.com"
  },
  "featureList": [
    "Calculate total launch costs",
    "Product category-specific estimates",
    "Marketing budget planning",
    "Break-even analysis",
    "Investment requirement planning"
  ]
}
</script>

</Layout>

<style>
  /* Reset and ensure our styles take priority */
  .calculator-page,
  .calculator-page * {
    box-sizing: border-box !important;
  }

  /* Override any existing margin/padding */
  .calculator-page .section-title,
  .calculator-page .summary-grid,
  .calculator-page .cost-breakdown,
  .calculator-page .total-investment-banner,
  .calculator-page .considerations {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  .calculator-page {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #bae6fd 100%);
    min-height: 100vh;
    color: #0f172a;
    overflow-x: hidden;
    padding-top: 80px;
  }

  .calculator-page * {
    box-sizing: border-box;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    min-height: calc(100vh - 80px);
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .header {
    text-align: center;
    margin-bottom: 40px;
    position: relative;
  }

  .header h1 {
    font-size: 3rem;
    font-weight: 700;
    background: linear-gradient(45deg, #3b82f6, #8b5cf6, #ef4444);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradientShift 3s ease-in-out infinite;
    text-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
    margin: 0;
  }

  .header p {
    font-size: 1.2rem;
    color: #475569;
    margin-top: 10px;
  }

  @keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .calculator-page .calculator-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 40px !important;
    margin-bottom: 40px !important;
    align-items: start !important;
  }

  @media (max-width: 768px) {
    .calculator-grid {
      grid-template-columns: 1fr;
      gap: 30px;
    }
    
    .header h1 {
      font-size: 2.2rem;
    }
    
    .container {
      padding: 15px;
    }
    
    .input-section, .results-section {
      padding: 20px;
    }
  }

  .calculator-page .input-section, 
  .calculator-page .results-section {
    background: rgba(255, 255, 255, 0.9) !important;
    border-radius: 20px !important;
    padding: 30px !important;
    backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(59, 130, 246, 0.2) !important;
    box-shadow: 0 20px 40px rgba(59, 130, 246, 0.1) !important;
    transition: all 0.3s ease !important;
    margin: 0 !important;
  }

  .calculator-page .input-section:hover, 
  .calculator-page .results-section:hover {
    transform: translateY(-5px) !important;
    box-shadow: 0 25px 50px rgba(59, 130, 246, 0.15) !important;
  }

  .calculator-page .section-title {
    font-size: 1.8rem !important;
    margin-bottom: 25px !important;
    color: #3b82f6 !important;
    text-align: center !important;
    position: relative !important;
    font-weight: 600 !important;
  }

  .section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    border-radius: 2px;
  }

  .input-group {
    margin-bottom: 20px;
  }

  .input-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #0f172a;
    font-size: 0.95rem;
  }

  .input-group input, .input-group select {
    width: 100%;
    padding: 15px 20px;
    border: 2px solid rgba(59, 130, 246, 0.2);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.7);
    color: #0f172a;
    font-size: 1rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
  }

  .input-group input:focus, .input-group select:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
    background: rgba(255, 255, 255, 0.9);
    transform: translateY(-2px);
  }

  .input-group input::placeholder {
    color: #94a3b8;
  }

  .calculate-btn {
    width: 100%;
    padding: 15px 20px;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 10px;
  }

  .calculate-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
  }

  .calculate-btn:disabled {
    background: #9ca3af;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .loading {
    display: none;
    text-align: center;
    color: #3b82f6;
    margin-top: 20px;
  }

  .loading.show {
    display: block;
  }

  .spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #3b82f6;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto 10px;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .results {
    display: none;
  }

  .results.show {
    display: block;
  }

  .placeholder {
    text-align: center;
    color: #6c757d;
    margin-top: 30px;
  }

  .placeholder.hide {
    display: none;
  }

  .placeholder-icon {
    font-size: 3rem;
    margin-bottom: 16px;
  }

  .placeholder h3 {
    font-size: 1.5rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 8px;
  }

  .placeholder p {
    font-size: 1rem;
    line-height: 1.6;
  }

  .calculator-page .summary-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)) !important;
    gap: 15px !important;
    margin-bottom: 25px !important;
  }

  .calculator-page .summary-card {
    background: rgba(255, 255, 255, 0.6) !important;
    padding: 20px !important;
    border-radius: 12px !important;
    text-align: center !important;
    border: 1px solid rgba(59, 130, 246, 0.1) !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.1) !important;
  }

  .calculator-page .summary-card:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15) !important;
  }

  .calculator-page .summary-value {
    font-size: 1.8rem !important;
    font-weight: 700 !important;
    color: #3b82f6 !important;
    margin-bottom: 5px !important;
    line-height: 1.2 !important;
  }

  .calculator-page .summary-label {
    font-size: 0.85rem !important;
    color: #6c757d !important;
    font-weight: 500 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    line-height: 1.3 !important;
  }

  .calculator-page .cost-breakdown {
    background: rgba(255, 255, 255, 0.6) !important;
    border-radius: 16px !important;
    padding: 25px !important;
    margin-bottom: 25px !important;
    border: 1px solid rgba(59, 130, 246, 0.1) !important;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.08) !important;
  }

  .calculator-page .cost-breakdown h3 {
    margin-bottom: 20px !important;
    color: #3b82f6 !important;
    font-size: 1.3rem !important;
    text-align: center !important;
    font-weight: 600 !important;
  }

  .calculator-page .cost-table {
    width: 100% !important;
    border-collapse: collapse !important;
    border-radius: 8px !important;
    overflow: hidden !important;
    border: 1px solid rgba(59, 130, 246, 0.2) !important;
    background: white !important;
  }

  .calculator-page .cost-table th {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1)) !important;
    padding: 15px !important;
    text-align: left !important;
    font-weight: 600 !important;
    color: #3b82f6 !important;
    font-size: 0.95rem !important;
    border-bottom: 1px solid rgba(59, 130, 246, 0.2) !important;
  }

  .calculator-page .cost-table th:last-child {
    text-align: right !important;
  }

  .calculator-page .cost-table td {
    padding: 15px !important;
    border-bottom: 1px solid rgba(59, 130, 246, 0.1) !important;
    font-size: 0.95rem !important;
    background: white !important;
  }

  .calculator-page .cost-table tbody tr:hover {
    background-color: rgba(59, 130, 246, 0.05) !important;
  }

  .calculator-page .cost-table tbody tr:last-child td {
    border-bottom: none !important;
  }

  .calculator-page .cost-category {
    font-weight: 600 !important;
    color: #0f172a !important;
    margin-bottom: 2px !important;
    font-size: 1rem !important;
  }

  .calculator-page .cost-description {
    font-size: 0.85rem !important;
    color: #6c757d !important;
    line-height: 1.4 !important;
  }

  .calculator-page .cost-range {
    text-align: right !important;
    font-weight: 600 !important;
    color: #3b82f6 !important;
    font-size: 1rem !important;
  }

  .total-investment-banner {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    color: white;
    border-radius: 16px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(59, 130, 246, 0.3);
    margin-bottom: 25px;
    position: relative;
    overflow: hidden;
  }

  .total-investment-banner::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: shimmer 3s ease-in-out infinite;
  }

  @keyframes shimmer {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(180deg); }
  }

  .total-investment-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 12px;
    opacity: 0.9;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    position: relative;
    z-index: 1;
  }

  .total-investment-amount {
    font-size: 2.4rem;
    font-weight: 900;
    margin-bottom: 8px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    line-height: 1;
    position: relative;
    z-index: 1;
  }

  .total-investment-subtitle {
    font-size: 1rem;
    opacity: 0.8;
    font-weight: 400;
    position: relative;
    z-index: 1;
  }

  .calculator-page .considerations {
    background: rgba(254, 243, 199, 0.8) !important;
    border: 1px solid #f59e0b !important;
    border-radius: 12px !important;
    padding: 20px !important;
  }

  .calculator-page .considerations h3 {
    color: #92400e !important;
    margin-bottom: 15px !important;
    font-size: 1.25rem !important;
    font-weight: 600 !important;
  }

  .calculator-page .considerations ul {
    list-style: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .calculator-page .considerations li {
    position: relative !important;
    padding-left: 24px !important;
    margin-bottom: 10px !important;
    color: #92400e !important;
    font-size: 0.95rem !important;
    line-height: 1.5 !important;
  }

  .calculator-page .considerations li:before {
    content: "‚ö†Ô∏è" !important;
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;
  }

  .calculator-page .considerations li:last-child {
    margin-bottom: 0 !important;
  }

  .floating-elements {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
  }

  .floating-circle {
    position: absolute;
    border-radius: 50%;
    background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
    animation: float 6s ease-in-out infinite;
  }

  .floating-circle:nth-child(1) {
    width: 80px;
    height: 80px;
    top: 20%;
    left: 10%;
    animation-delay: 0s;
  }

  .floating-circle:nth-child(2) {
    width: 120px;
    height: 120px;
    top: 60%;
    right: 15%;
    animation-delay: 2s;
  }

  .floating-circle:nth-child(3) {
    width: 60px;
    height: 60px;
    bottom: 20%;
    left: 20%;
    animation-delay: 4s;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
  }

  .error {
    background: rgba(254, 242, 242, 0.9);
    color: #dc2626;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
    display: none;
    border: 1px solid #fca5a5;
  }

  .error.show {
    display: block;
  }

  /* Button styles */
  .btn {
    display: inline-block;
    padding: 12px 24px;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 600;
    text-align: center;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .btn-secondary {
    background: transparent;
    color: #3b82f6;
    border: 2px solid #3b82f6;
  }

  .btn-secondary:hover {
    background: #3b82f6;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
  }

  @media (max-width: 480px) {
    .summary-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .cost-table th,
    .cost-table td {
      padding: 12px 8px;
      font-size: 0.85rem;
    }

    .total-investment-amount {
      font-size: 2rem;
    }
  }

  /* Dark mode support */
  :global(.dark) .calculator-page {
    background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
    color: #ffffff;
  }

  :global(.dark) .header p {
    color: #a0a0a0;
  }

  :global(.dark) .header h1 {
    background: linear-gradient(45deg, #00d4ff, #5865f2, #ff6b6b);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
  }

  :global(.dark) .input-section,
  :global(.dark) .results-section {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  }

  :global(.dark) .section-title {
    color: #00d4ff;
  }

  :global(.dark) .section-title::after {
    background: linear-gradient(90deg, #00d4ff, #5865f2);
  }

  :global(.dark) .input-group label {
    color: #e0e0e0;
  }

  :global(.dark) .input-group input,
  :global(.dark) .input-group select {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    color: #ffffff;
  }

  :global(.dark) .input-group input:focus,
  :global(.dark) .input-group select:focus {
    border-color: #00d4ff;
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    background: rgba(255, 255, 255, 0.08);
  }

  :global(.dark) .summary-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  :global(.dark) .summary-value {
    color: #00d4ff;
  }

  :global(.dark) .summary-label {
    color: #a0a0a0;
  }

  :global(.dark) .cost-breakdown {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  :global(.dark) .cost-breakdown h3 {
    color: #00d4ff;
  }

  :global(.dark) .cost-table th {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(88, 101, 242, 0.1));
    color: #00d4ff;
  }

  :global(.dark) .cost-table tbody tr:hover {
    background-color: rgba(0, 212, 255, 0.05);
  }

  :global(.dark) .cost-category {
    color: #ffffff;
  }

  :global(.dark) .cost-description {
    color: #a0a0a0;
  }

  :global(.dark) .cost-range {
    color: #00d4ff;
  }

  :global(.dark) .total-investment-banner {
    background: linear-gradient(135deg, #00d4ff 0%, #5865f2 100%);
  }

  :global(.dark) .considerations {
    background: rgba(0, 212, 255, 0.1);
    border: 1px solid rgba(0, 212, 255, 0.3);
  }

  :global(.dark) .considerations h3,
  :global(.dark) .considerations li {
    color: #00d4ff;
  }

  :global(.dark) .floating-circle {
    background: linear-gradient(45deg, rgba(0, 212, 255, 0.1), rgba(88, 101, 242, 0.1));
  }

  :global(.dark) .btn-secondary {
    color: #00d4ff;
    border-color: #00d4ff;
  }

  :global(.dark) .btn-secondary:hover {
    background: #00d4ff;
    color: #0f0f23;
  }

  :global(.dark) .placeholder h3 {
    color: #ffffff;
  }

  :global(.dark) .placeholder {
    color: #a0a0a0;
  }
</style>

<script>
  console.log('üöÄ Launch cost estimator script starting...');

  // Cost calculation logic - REALISTIC industry data
  const costData = {
    electronics: {
      sourcing: [800, 2500],
      inventory: [2000, 8000],
      shipping: [300, 800],
      platform: [500, 1500],
      marketing: [1500, 5000],
      legal: [200, 800],
      working: [1000, 3000],
      considerations: [
        "Electronics need safety certifications ($200-800)",
        "Higher import duties (15-25%) from overseas",
        "Plan for 15-20% return rate",
        "Competition requires strong advertising budget"
      ]
    },
    fashion: {
      sourcing: [400, 1500],
      inventory: [1500, 6000],
      shipping: [200, 600],
      platform: [300, 1200],
      marketing: [1000, 4000],
      legal: [150, 500],
      working: [800, 2500],
      considerations: [
        "Fashion has 25-35% return rates",
        "Seasonal inventory planning critical",
        "Instagram/TikTok marketing essential",
        "Size guides reduce returns significantly"
      ]
    },
    beauty: {
      sourcing: [600, 2000],
      inventory: [1800, 7000],
      shipping: [250, 700],
      platform: [400, 1300],
      marketing: [2000, 6000],
      legal: [300, 1000],
      working: [900, 2800],
      considerations: [
        "FDA compliance required for skincare",
        "Influencer marketing drives 60% of sales",
        "Before/after content converts best",
        "Expiration dates affect inventory management"
      ]
    },
    fitness: {
      sourcing: [500, 1800],
      inventory: [1600, 5500],
      shipping: [250, 650],
      platform: [350, 1100],
      marketing: [1200, 4200],
      legal: [150, 600],
      working: [750, 2400],
      considerations: [
        "New Year demand spike (3x normal)",
        "Video demonstrations boost sales 40%",
        "Fitness influencer partnerships work well",
        "Equipment weight affects shipping costs"
      ]
    },
    home: {
      sourcing: [700, 2200],
      inventory: [2000, 7500],
      shipping: [400, 1000],
      platform: [400, 1200],
      marketing: [1000, 3500],
      legal: [200, 700],
      working: [800, 2600],
      considerations: [
        "Room staging photos increase sales 25%",
        "Seasonal trends affect demand",
        "Larger items = higher shipping costs",
        "Home improvement seasons boost sales"
      ]
    },
    jewelry: {
      sourcing: [800, 3000],
      inventory: [2500, 10000],
      shipping: [150, 400],
      platform: [500, 1500],
      marketing: [1800, 5500],
      legal: [300, 1200],
      working: [1200, 4000],
      considerations: [
        "High-value shipping insurance required",
        "Professional photography essential",
        "Holiday seasons drive 40% of sales",
        "Authentication builds customer trust"
      ]
    },
    books: {
      sourcing: [300, 1000],
      inventory: [800, 3000],
      shipping: [150, 400],
      platform: [250, 800],
      marketing: [600, 2000],
      legal: [100, 400],
      working: [400, 1200],
      considerations: [
        "Print-on-demand reduces inventory risk",
        "Amazon dominates - differentiation key",
        "Educational content marketing works",
        "Low margins require volume sales"
      ]
    },
    toys: {
      sourcing: [600, 2000],
      inventory: [1500, 6000],
      shipping: [250, 700],
      platform: [350, 1000],
      marketing: [1200, 4000],
      legal: [200, 800],
      working: [700, 2300],
      considerations: [
        "Safety testing required for children's toys",
        "Holiday season drives 50% of sales",
        "Parent review content crucial",
        "Age-appropriate marketing regulations"
      ]
    },
    food: {
      sourcing: [800, 2500],
      inventory: [1200, 4500],
      shipping: [300, 800],
      platform: [400, 1200],
      marketing: [1500, 4500],
      legal: [400, 1500],
      working: [900, 2800],
      considerations: [
        "FDA regulations and nutritional labeling",
        "Expiration dates limit inventory time",
        "Cold chain shipping increases costs",
        "Subscription model reduces acquisition cost"
      ]
    }
  };

  // Default costs for other categories
  const defaultCosts = {
    sourcing: [500, 1800],
    inventory: [1500, 5500],
    shipping: [250, 650],
    platform: [350, 1100],
    marketing: [1000, 3500],
    legal: [150, 600],
    working: [700, 2200],
    considerations: [
      "Research your category's specific regulations",
      "Start small and scale based on demand",
      "Customer service quality drives repeat sales",
      "Plan for seasonal demand changes"
    ]
  };

  function initializeCalculator() {
    console.log('üéØ DOM loaded, setting up event listener');
    
    const analyzeBtn = document.getElementById('analyze-button');
    console.log('Button found:', !!analyzeBtn);
    
    if (analyzeBtn) {
      analyzeBtn.addEventListener('click', function(e) {
        e.preventDefault();
        console.log('üéâ Button clicked!');
        calculateCosts();
      });
    } else {
      console.error('‚ùå Analyze button not found');
    }
  }

  function calculateCosts() {
    console.log('üìä Calculate costs function called');
    
    const productType = document.getElementById('productType').value;
    const targetPrice = parseInt(document.getElementById('targetPrice').value) || 29;
    const businessScale = document.getElementById('businessScale').value;

    console.log('Form values:', { productType, targetPrice, businessScale });

    if (!productType) {
      showError('Please select a product category');
      return;
    }

    // Show loading
    showLoading();
    hideError();

    // Simulate calculation delay
    setTimeout(() => {
      const costs = costData[productType] || defaultCosts;
      
      // Adjust costs based on business scale
      const scaleMultiplier = businessScale === 'small' ? 0.7 : businessScale === 'large' ? 1.3 : 1;
      
      // Adjust costs based on target price
      const priceMultiplier = targetPrice < 25 ? 0.8 : targetPrice > 100 ? 1.2 : 1;
      
      const finalMultiplier = scaleMultiplier * priceMultiplier;

      const finalCosts = {
        sourcing: [Math.round(costs.sourcing[0] * finalMultiplier), Math.round(costs.sourcing[1] * finalMultiplier)],
        inventory: [Math.round(costs.inventory[0] * finalMultiplier), Math.round(costs.inventory[1] * finalMultiplier)],
        shipping: [Math.round(costs.shipping[0] * finalMultiplier), Math.round(costs.shipping[1] * finalMultiplier)],
        platform: [Math.round(costs.platform[0] * finalMultiplier), Math.round(costs.platform[1] * finalMultiplier)],
        marketing: [Math.round(costs.marketing[0] * finalMultiplier), Math.round(costs.marketing[1] * finalMultiplier)],
        legal: [Math.round(costs.legal[0] * finalMultiplier), Math.round(costs.legal[1] * finalMultiplier)],
        working: [Math.round(costs.working[0] * finalMultiplier), Math.round(costs.working[1] * finalMultiplier)]
      };

      displayResults(finalCosts, costs.considerations, productType, targetPrice, businessScale);
      hideLoading();
      showResults();
    }, 2000);
  }

  function displayResults(costs, considerations, productType, targetPrice, businessScale) {
    console.log('üé® Displaying results');
    
    // Hide placeholder
    const placeholder = document.getElementById('placeholder');
    if (placeholder) placeholder.classList.add('hide');

    // Calculate total
    const totalMin = costs.sourcing[0] + costs.inventory[0] + costs.shipping[0] + costs.platform[0] + costs.marketing[0] + costs.legal[0] + costs.working[0];
    const totalMax = costs.sourcing[1] + costs.inventory[1] + costs.shipping[1] + costs.platform[1] + costs.marketing[1] + costs.legal[1] + costs.working[1];

    // Create summary cards
    const summaryHTML = `
      <div class="summary-card">
        <div class="summary-value">$${totalMin.toLocaleString()}</div>
        <div class="summary-label">Minimum Budget</div>
      </div>
      <div class="summary-card">
        <div class="summary-value">$${totalMax.toLocaleString()}</div>
        <div class="summary-label">Recommended Budget</div>
      </div>
      <div class="summary-card">
        <div class="summary-value">${Math.round((costs.marketing[0] + costs.marketing[1]) / 2 / ((totalMin + totalMax) / 2) * 100)}%</div>
        <div class="summary-label">Marketing %</div>
      </div>
      <div class="summary-card">
        <div class="summary-value">${Math.round(((totalMin + totalMax) / 2) / targetPrice)}</div>
        <div class="summary-label">Break Even Units</div>
      </div>
    `;

    const summaryGrid = document.getElementById('summaryGrid');
    if (summaryGrid) summaryGrid.innerHTML = summaryHTML;

    // Create cost breakdown table
    const costTableHTML = `
      <table class="cost-table">
        <thead>
          <tr>
            <th>Cost Category</th>
            <th>Estimated Range</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <div class="cost-category">Product Development & Sourcing</div>
              <div class="cost-description">Initial product development, supplier negotiations, samples</div>
            </td>
            <td class="cost-range">$${costs.sourcing[0].toLocaleString()} - $${costs.sourcing[1].toLocaleString()}</td>
          </tr>
          <tr>
            <td>
              <div class="cost-category">Initial Inventory</div>
              <div class="cost-description">First production run, minimum order quantities</div>
            </td>
            <td class="cost-range">$${costs.inventory[0].toLocaleString()} - $${costs.inventory[1].toLocaleString()}</td>
          </tr>
          <tr>
            <td>
              <div class="cost-category">Shipping & Import Duties</div>
              <div class="cost-description">International shipping, customs, warehousing</div>
            </td>
            <td class="cost-range">$${costs.shipping[0].toLocaleString()} - $${costs.shipping[1].toLocaleString()}</td>
          </tr>
          <tr>
            <td>
              <div class="cost-category">Website & Platform Setup</div>
              <div class="cost-description">E-commerce platform, design, payment processing</div>
            </td>
            <td class="cost-range">$${costs.platform[0].toLocaleString()} - $${costs.platform[1].toLocaleString()}</td>
          </tr>
          <tr>
            <td>
              <div class="cost-category">Marketing & Advertising</div>
              <div class="cost-description">Paid ads, content creation, influencer partnerships</div>
            </td>
            <td class="cost-range">$${costs.marketing[0].toLocaleString()} - $${costs.marketing[1].toLocaleString()}</td>
          </tr>
          <tr>
            <td>
              <div class="cost-category">Legal & Compliance</div>
              <div class="cost-description">Business registration, trademarks, insurance</div>
            </td>
            <td class="cost-range">$${costs.legal[0].toLocaleString()} - $${costs.legal[1].toLocaleString()}</td>
          </tr>
          <tr>
            <td>
              <div class="cost-category">Working Capital</div>
              <div class="cost-description">Cash buffer for operations, unexpected costs</div>
            </td>
            <td class="cost-range">$${costs.working[0].toLocaleString()} - $${costs.working[1].toLocaleString()}</td>
          </tr>
        </tbody>
      </table>
    `;

    const costTableContainer = document.getElementById('costTableContainer');
    if (costTableContainer) costTableContainer.innerHTML = costTableHTML;

    // Create total section
    const totalHTML = `
      <div class="total-investment-banner">
        <div class="total-investment-title">Total Launch Investment</div>
        <div class="total-investment-amount">$${totalMin.toLocaleString()} - $${totalMax.toLocaleString()}</div>
        <div class="total-investment-subtitle">Complete budget for ${businessScale} scale launch</div>
      </div>
    `;

    const totalSection = document.getElementById('totalSection');
    if (totalSection) totalSection.innerHTML = totalHTML;

    // Display considerations
    let considerationsHTML = '<ul>';
    considerations.forEach(consideration => {
      considerationsHTML += `<li>${consideration}</li>`;
    });
    considerationsHTML += '</ul>';
    
    const considerationsContainer = document.getElementById('considerationsContent');
    if (considerationsContainer) considerationsContainer.innerHTML = considerationsHTML;
  }

  function showLoading() {
    const loading = document.getElementById('loading');
    if (loading) loading.classList.add('show');
  }

  function hideLoading() {
    const loading = document.getElementById('loading');
    if (loading) loading.classList.remove('show');
  }

  function showResults() {
    const results = document.getElementById('results');
    if (results) results.classList.add('show');
  }

  function showError(message) {
    const errorMessage = document.getElementById('errorMessage');
    const errorDiv = document.getElementById('error');
    if (errorMessage) errorMessage.textContent = message;
    if (errorDiv) errorDiv.classList.add('show');
  }

  function hideError() {
    const errorDiv = document.getElementById('error');
    if (errorDiv) errorDiv.classList.remove('show');
  }

  // Multiple initialization methods to handle different loading scenarios
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeCalculator);
  } else {
    // DOM is already loaded
    initializeCalculator();
  }

  // Also try after a small delay for navigation cases
  setTimeout(initializeCalculator, 50);

  // Additional fallback for Astro navigation
  document.addEventListener('astro:page-load', initializeCalculator);
</script>